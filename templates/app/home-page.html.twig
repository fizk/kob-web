{% extends '@layout/default.html.twig' %}

{% block title %}Kling &amp; Bang{% endblock %}

{% block content %}
    {% for item in list %}
        <article class="entry">
            <header class="entry__header">
                <ul class="entry__author-list">
                {% for author in item.authors %}
                    <li>
                        <h2 class="entry__author">
                            <a class="entry__author-link" href="{{selectPath(['listamadur', 'author'], false, {id: author.id})}}">{{author.name}}</a>
                        </h2>
                    </li>
                {% endfor %}
                </ul>
                <h3>{{item.title}}</h3>
                <time class="entry__time">{{item.from|date(language)}}</time> | <time class="entry__time">{{item.to|date(language)}}</time>
                {% if user_session %}
                <a href="{{ path('update-entry', {id: item.id}) }}">edit</a>
                {% endif %}
            </header>
            <aside class="entry__aside">
                {% if item.poster %}
                <img class="entry__poster" src="/img/640x/{{item.poster.name}}" />
                {% endif %}
                <ul class="gallery">
                {% for image in item.gallery %}
                    {% if image.width > image.height %}
                    <li class="gallery__item--landscape">
                        <img src="{{ path('asset', {size: '200x', name: image.name}) }}" class="gallery__image" />
                    </li>
                    {% else %}
                    <li class="gallery__item--portraid">
                        <img src="{{ path('asset', {size: 'x320', name: image.name}) }}" class="gallery__image" />
                    </li>
                    {% endif %}
                {% endfor %}
                </ul>
            </aside>
            <section class="entry__body">
                {% markdown %}
                {{ item.body|raw }}
                {% endmarkdown %}
            </section>

        </article>
    {% endfor %}
    {% for item in upcoming %}
        <p>{{item.title}}</p>
    {% endfor %}
{% endblock %}

{# {% extends '@layout/default.html.twig' %}

{% block title %}Kling &amp; Bang{% endblock %}

{% block meta %}
    <link rel="canonical" href="{{ host }}{{ path(language == 'is' ? 'heim' : 'home') }}" />
    <meta property="og:url" content="{{ host }}{{ path(language == 'is' ? 'heim' : 'home') }}" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Kling &amp; Bang" />
    <meta property="og:image" content="/images/poster.jpg" />
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="/styles/baguetteBox.min.css" />
{% endblock %}

{% block javascript %}
<script src="/scripts/baguetteBox.min.js"></script>
    <script>
    baguetteBox.run('.image__gallery', {
        // Custom options
    });
</script>
{% endblock %}

{% block content %}
    <main class="app__main">
        {% if list|length == 1 %}
            {% embed '@partials/full-entry.html.twig' with {
                item: list.0,
                user_session: user_session,
                is_header: true,
                language: language|default('is')
            } only %}
            {% endembed %}
        {% else %}
            <div class="app__header-brand">
                {% embed '@partials/header.html.twig' with {color: 'white'} %}{% endembed %}
            </div>
            <ul class="entry-container">
            {% for item in list %}
                <li class="entry-container__item">
                {% embed '@partials/summary-entry.html.twig' with {
                    item: item,
                    user_session: user_session,
                    is_header: loop.index0 == 0,
                    language: language|default('is')
                } only %}
                {% endembed %}
                </li>
            {% endfor %}
            </ul>
        {% endif %}

        {% for item in upcoming %}
            <article>
                <aside>
                    {% if item.poster %}
                        <img src="{{ path('asset', {size: '300x', name: item.poster.name}) }}" />
                    {% endif %}
                </aside>
                <div>
                    <ul>
                    {% for author in item.authors %}
                        <li>
                            <h2>
                                <a href="{{ path(language == 'is' ? 'syning' : 'entry', {id: item.title|slug(item.id)}) }}">{{ author.name }}</a>
                            </h2>
                        </li>
                    {% endfor %}
                    </ul>
                    <time>{{ item.from|date }} - {{ item.to|date }}</time>
                    <h3>
                        <a href="{{ path(language == 'is' ? 'syning' : 'entry', {id: item.title|slug(item.id)}) }}">{{ item.title }}</a>
                    </h3>
                </div>
            </article>
        {% endfor %}
    </main>
{% endblock %} #}
